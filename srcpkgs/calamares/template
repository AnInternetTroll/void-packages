# Template file for 'calamares'
pkgname=calamares
version=3.3.8+1
revision=1
build_style=cmake
configure_args="-DWITH_PYTHONQT:BOOL=ON -DINSTALL_CONFIG:BOOL=ON
 -DINSTALL_POLKIT:BOOL=ON -DBoost_NO_BOOST_CMAKE=ON
 -DSKIP_MODULES='webview;interactiveterminal;services-systemd;dummyprocess;dummypython;dummycpp;dummypythonqt'
 -DWITH_QT6=ON"
hostmakedepends="extra-cmake-modules pkg-config gettext ckbcomp kcoreaddons
 kdelibs4support python3-QtPy libpwquality AppStream-qt python3-yaml
 python3-jsonschema"
makedepends="python3-devel python3-jsonschema yaml-cpp-devel python3-yaml
 boost-devel python3-devel kpmcore-devel qt6-svg-devel qt6-base-devel
 qt6-declarative-devel kwidgetsaddons-devel ki18n-devel kconfig-devel
 plasma-framework-devel kpackage-devel libpwquality-devel"
depends="kconfig kcoreaddons kiconthemes ki18n kio ksolid yaml-cpp kpmcore
 boost ckbcomp hardinfo qt6-svg polkit-qt6 gtk-update-icon-cache
 plasma-framework squashfs-tools libpwquality AppStream-qt icu rsync smartmontools"
short_desc="Distribution-independent installer framework"
maintainer="Luca Matei Pintilie <luca@lucamatei.com>"
license="BSD-2-Clause,CC-BY-4.0,CC0-1.0,GPL-3.0-or-later,LGPL-2.1-only,LGPL-3.0-or-later,MIT"
homepage="https://calamares.io/"
changelog="https://github.com/calamares/calamares/releases/"
# distfiles="https://github.com/calamares/calamares/releases/download/v$version/calamares-$version.tar.gz"
# checksum=09435b04e7e5cee16177223068d8a7402c3c6b8126af13ff527af77742c43363
distfiles="https://github.com/calamares/calamares/archive/3e885cda193c8e1e5906cf407803e750d59e8561.tar.gz"
checksum=03b71ee5b536f316f97a049225f96a74376cf876aa80824ecdd7f7ae645fc7d5

post_install() {
	vlicense LICENSES/BSD-2-Clause.txt
	vlicense LICENSES/MIT.txt
}

calamares-devel_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.so"
	}
}
